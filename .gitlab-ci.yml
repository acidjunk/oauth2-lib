---
stages:
  - test

testing:
    image: python:3.7
    stage: test
    script:
      - pip install .[test]
      - black . --check
      - isort -rc -c
      - flake8 .
      - mypy -p oauth2_lib
      - pytest
      - pytest -vvv --cov-branch --cov-fail-under=91 --cov=oauth2_lib.fastapi --cov-config=.coveragerc --junitxml=report-pytest.xml tests/test_fastapi.py
    tags:
      - python-lint-ext
